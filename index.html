<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeyLab X - Hasbro Global Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 10px; }
        .radar-container { position: relative; width: 100%; height: 350px; margin: auto; }
        .grade-s { color: #f59e0b; border-color: #f59e0b; background: #fffbeb; }
        .grade-a { color: #ef4444; border-color: #ef4444; background: #fef2f2; }
        .grade-b { color: #3b82f6; border-color: #3b82f6; background: #eff6ff; }
        .inventory-card:hover .delete-btn { opacity: 1; transform: scale(1); }
        .delete-btn { opacity: 0; transform: scale(0.8); transition: all 0.2s; }
    </style>
    <!-- Chosen Palette: Midnight & Cyan - Fondo Slate-50, elementi UI in bianco neve e accenti Blue-600. Colori semantici per i tipi di Bey. -->
    <!-- Application Structure Plan: 
         - Selettore Prodotti Hasbro: Dropdown con tutta la lista Hasbro Wiki.
         - Archivio Parti: Visualizzazione e rimozione pezzi.
         - Builder Professionale: Solo pezzi posseduti, calcolo stats basato su meta Hasbro.
         - 3on3 Deck: Gestione squadra torneo.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-900">

    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-black italic shadow-lg shadow-blue-200">HX</div>
                <div>
                    <h1 class="font-black text-lg tracking-tighter uppercase leading-none">BeyLab <span class="text-blue-600">Hasbro</span></h1>
                    <span class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Database Ufficiale Hasbro X</span>
                </div>
            </div>
            <div class="hidden md:flex gap-6 text-[10px] font-black uppercase tracking-widest text-slate-400">
                <a href="#archive" class="hover:text-blue-600 transition">Archivio</a>
                <a href="#builder" class="hover:text-blue-600 transition">Officina</a>
                <a href="#deck" class="hover:text-blue-600 transition">Deck</a>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-8 space-y-12">

        <!-- Intro -->
        <section class="bg-slate-900 rounded-[2rem] p-8 md:p-12 text-white relative overflow-hidden shadow-2xl">
            <div class="relative z-10 max-w-2xl space-y-4">
                <h2 class="text-4xl md:text-5xl font-black italic tracking-tighter uppercase leading-none">Domina il <span class="text-blue-500">Meta Hasbro</span></h2>
                <p class="text-slate-400 text-sm md:text-base">Catalogazione completa di tutti i prodotti Hasbro Beyblade X. Aggiungi i tuoi acquisti e scopri le migliori combinazioni per i tornei WBO e locali.</p>
            </div>
            <div class="absolute right-0 bottom-0 opacity-10 pointer-events-none text-[15rem] font-black italic translate-y-20 translate-x-10">BEY</div>
        </section>

        <!-- ARCHIVIO & AGGIUNTA -->
        <section id="archive" class="space-y-6">
            <div class="bg-white rounded-3xl p-6 md:p-8 border border-slate-200 shadow-sm">
                <div class="flex flex-col md:flex-row items-start md:items-end justify-between gap-6">
                    <div class="flex-1 w-full space-y-4">
                        <label class="text-[10px] font-black uppercase tracking-widest text-slate-400">Aggiungi Prodotto Hasbro (Starters, Dual Packs, Beystadiums)</label>
                        <div class="flex gap-2">
                            <select id="hasbroProductSelector" class="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-xs font-bold focus:ring-2 focus:ring-blue-600 outline-none">
                                <option value="">-- Cerca Prodotto Hasbro --</option>
                            </select>
                            <button id="addBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition shadow-lg active:scale-95">Aggiungi</button>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mt-12">
                    <!-- Blades -->
                    <div class="space-y-4">
                        <h4 class="text-[10px] font-black uppercase text-red-500 flex items-center gap-2">
                            <div class="w-2 h-2 bg-red-500 rounded-full"></div> Blades Hasbro
                        </h4>
                        <div id="inv-blades" class="space-y-2 h-80 overflow-y-auto pr-2">
                            <div class="py-10 text-center border-2 border-dashed border-slate-100 rounded-2xl text-slate-300 text-xs italic">Nessuna Blade aggiunta</div>
                        </div>
                    </div>
                    <!-- Ratchets -->
                    <div class="space-y-4">
                        <h4 class="text-[10px] font-black uppercase text-yellow-500 flex items-center gap-2">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div> Ratchets
                        </h4>
                        <div id="inv-ratchets" class="space-y-2 h-80 overflow-y-auto pr-2">
                            <div class="py-10 text-center border-2 border-dashed border-slate-100 rounded-2xl text-slate-300 text-xs italic">Nessun Ratchet</div>
                        </div>
                    </div>
                    <!-- Bits -->
                    <div class="space-y-4">
                        <h4 class="text-[10px] font-black uppercase text-green-500 flex items-center gap-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div> Bits
                        </h4>
                        <div id="inv-bits" class="space-y-2 h-80 overflow-y-auto pr-2">
                            <div class="py-10 text-center border-2 border-dashed border-slate-100 rounded-2xl text-slate-300 text-xs italic">Nessun Bit</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- BUILDER -->
        <section id="builder" class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-5 bg-white rounded-3xl p-8 border border-slate-200 shadow-sm space-y-8">
                <h3 class="text-xl font-black italic uppercase">Officina Build</h3>
                <div class="space-y-6">
                    <div class="space-y-2">
                        <label class="text-[10px] font-black uppercase text-slate-400">Blade</label>
                        <select id="select-blade" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-4 text-sm font-bold focus:ring-2 focus:ring-blue-600 outline-none"></select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] font-black uppercase text-slate-400">Ratchet</label>
                        <select id="select-ratchet" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-4 text-sm font-bold focus:ring-2 focus:ring-blue-600 outline-none"></select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] font-black uppercase text-slate-400">Bit</label>
                        <select id="select-bit" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-4 text-sm font-bold focus:ring-2 focus:ring-blue-600 outline-none"></select>
                    </div>
                    <div class="pt-4 flex gap-4">
                        <button id="analyzeBtn" class="flex-1 bg-slate-900 text-white py-4 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-blue-600 transition">Analizza</button>
                        <button id="resetBtn" class="px-6 py-4 text-slate-400 hover:text-red-500 font-bold transition">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Analisi -->
            <div class="lg:col-span-7 bg-white rounded-3xl p-8 border border-slate-200 shadow-sm flex flex-col">
                <div class="flex justify-between items-start mb-8">
                    <h3 class="text-xl font-black italic uppercase">Performance Report</h3>
                    <div id="grade-badge" class="w-16 h-16 rounded-2xl flex flex-col items-center justify-center border-2 border-slate-100 text-slate-300">
                        <span class="text-[9px] font-bold uppercase">Grade</span>
                        <span class="text-2xl font-black italic">-</span>
                    </div>
                </div>

                <div class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="radar-container">
                        <canvas id="radarChart"></canvas>
                        <div id="chart-msg" class="absolute inset-0 flex items-center justify-center text-slate-300 text-xs italic font-bold">In attesa di componenti...</div>
                    </div>
                    <div class="space-y-6">
                        <div class="p-5 bg-slate-50 rounded-2xl border border-slate-100">
                            <h5 class="text-[10px] font-black uppercase text-slate-400 mb-3 tracking-widest">Feedback Strategico</h5>
                            <div id="feedback-text" class="text-xs text-slate-600 italic leading-relaxed">Completa la build per ricevere la valutazione tecnica.</div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="p-4 bg-blue-50 rounded-xl text-center">
                                <span class="block text-[10px] font-bold text-blue-300 uppercase">Peso</span>
                                <span id="val-weight" class="text-xl font-black text-blue-600">-- g</span>
                            </div>
                            <div class="p-4 bg-slate-900 rounded-xl text-center">
                                <span class="block text-[10px] font-bold text-slate-500 uppercase">Burst Res.</span>
                                <span id="val-burst" class="text-xl font-black text-white">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="saveDeckBtn" disabled class="mt-8 w-full py-4 border-2 border-dashed border-slate-200 text-slate-300 font-black text-[10px] uppercase tracking-widest rounded-2xl hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-all">
                    + Aggiungi al Deck Torneo
                </button>
            </div>
        </section>

        <!-- DECK -->
        <section id="deck" class="space-y-6 pb-20">
            <h3 class="text-2xl font-black italic uppercase">Mio Deck 3on3</h3>
            <div id="deck-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
        </section>

    </main>

    <script>
        // --- DATABASE COMPONENTI HASBRO ---
        const PARTS_DB = {
            blades: {
                "Sword Dran": { type: "Attack", weight: 35.1, stats: { atk: 85, def: 20, sta: 15, res: 55 }, desc: "Lama classica per KO esplosivi." },
                "Scythe Incendio": { type: "Balance", weight: 32.8, stats: { atk: 50, def: 55, sta: 65, res: 65 }, desc: "Ottimo bilanciamento e stamina." },
                "Arrow Wizard": { type: "Stamina", weight: 31.5, stats: { atk: 15, def: 30, sta: 95, res: 50 }, desc: "Sottile, perfetta per spin finish." },
                "Helm Knight": { type: "Defense", weight: 33.2, stats: { atk: 30, def: 90, sta: 40, res: 80 }, desc: "Forma esagonale per parry." },
                "Soar Phoenix": { type: "Attack", weight: 38.2, stats: { atk: 95, def: 35, sta: 25, res: 60 }, desc: "Pesante e devastante. Meta-tier." },
                "Keel Shark": { type: "Attack", weight: 33.9, stats: { atk: 98, def: 10, sta: 10, res: 45 }, desc: "Specialista dell'Uppercut." },
                "Viper Tail": { type: "Stamina", weight: 33.2, stats: { atk: 45, def: 35, sta: 85, res: 55 }, desc: "Lama per destabilizzare l'avversario." },
                "Steel Samurai": { type: "Defense", weight: 33.5, stats: { atk: 40, def: 85, sta: 45, res: 75 }, desc: "Ottima per contrattacco difensivo." },
                "Talon Drake": { type: "Attack", weight: 34.2, stats: { atk: 88, def: 30, sta: 25, res: 60 }, desc: "Lama a raffica per logoramento." },
                "Dranzer Spiral": { type: "Balance", weight: 30.5, stats: { atk: 65, def: 40, sta: 40, res: 55 }, desc: "Omaggio classico, ottima agilit√†." },
                "Chain Incendio": { type: "Balance", weight: 33.6, stats: { atk: 60, def: 60, sta: 55, res: 70 }, desc: "Design a catena per parry dinamici." },
                "Dran Buster": { type: "Attack", weight: 37.8, stats: { atk: 100, def: 15, sta: 10, res: 50 }, desc: "UX Hasbro: Colpo singolo estremo." },
                "Wizard Rod": { type: "Stamina", weight: 36.5, stats: { atk: 25, def: 45, sta: 100, res: 65 }, desc: "UX Hasbro: Regina del meta stamina." },
                "Hells Hammer": { type: "Balance", weight: 35.5, stats: { atk: 75, def: 40, sta: 45, res: 70 }, desc: "UX Hasbro: Sbilancia l'avversario." },
                "Leon Crest": { type: "Defense", weight: 37.5, stats: { atk: 30, def: 100, sta: 35, res: 85 }, desc: "UX Hasbro: Muraglia insuperabile." },
                // Crossovers
                "Optimus Prime": { type: "Attack", weight: 35.0, stats: { atk: 90, def: 25, sta: 20, res: 60 }, desc: "Transformers: Bilanciato verso l'attacco." },
                "Megatron": { type: "Defense", weight: 33.5, stats: { atk: 40, def: 90, sta: 40, res: 80 }, desc: "Transformers: Difesa brutale." },
                "Iron Man": { type: "Stamina", weight: 32.5, stats: { atk: 30, def: 35, sta: 92, res: 55 }, desc: "Marvel: Precisione e durata." },
                "Thanos": { type: "Attack", weight: 34.5, stats: { atk: 96, def: 20, sta: 15, res: 50 }, desc: "Marvel: Forza di impatto pura." }
            },
            ratchets: {
                "3-60": { weight: 6.5, res: 80 },
                "4-60": { weight: 6.8, res: 75 },
                "5-60": { weight: 7.2, res: 90 },
                "9-60": { weight: 7.5, res: 85 },
                "3-80": { weight: 7.0, res: 60 },
                "5-80": { weight: 7.8, res: 70 },
                "4-80": { weight: 7.3, res: 65 },
                "1-60": { weight: 6.4, res: 95 },
                "7-60": { weight: 7.4, res: 85 }
            },
            bits: {
                "Flat": { type: "Attack", spd: 90, sta: 10, dsh: 95 },
                "Taper": { type: "Balance", spd: 70, sta: 45, dsh: 75 },
                "Ball": { type: "Stamina", spd: 10, sta: 100, dsh: 15 },
                "Needle": { type: "Defense", spd: 10, sta: 65, dsh: 20 },
                "High Needle": { type: "Defense", spd: 10, sta: 60, dsh: 20 },
                "Point": { type: "Balance", spd: 65, sta: 55, dsh: 70 },
                "Orb": { type: "Stamina", spd: 15, sta: 95, dsh: 20 },
                "Low Flat": { type: "Attack", spd: 95, sta: 5, dsh: 100 },
                "Gear Flat": { type: "Attack", spd: 110, sta: 0, dsh: 110 },
                "Accel": { type: "Attack", spd: 100, sta: 5, dsh: 100 },
                "Hexa": { type: "Defense", spd: 30, sta: 40, dsh: 45 },
                "Disc Ball": { type: "Stamina", spd: 20, sta: 92, dsh: 30 }
            }
        };

        const PRODUCTS = [
            { name: "Starter Pack: Sword Dran 3-60F", parts: ["Sword Dran", "3-60", "Flat"] },
            { name: "Starter Pack: Scythe Incendio 4-60T", parts: ["Scythe Incendio", "4-60", "Taper"] },
            { name: "Starter Pack: Arrow Wizard 4-80B", parts: ["Arrow Wizard", "4-80", "Ball"] },
            { name: "Starter Pack: Helm Knight 3-80N", parts: ["Helm Knight", "3-80", "Needle"] },
            { name: "Starter Pack: Soar Phoenix 9-60GF", parts: ["Soar Phoenix", "9-60", "Gear Flat"] },
            { name: "Booster Pack: Keel Shark 3-60LF", parts: ["Keel Shark", "3-60", "Low Flat"] },
            { name: "Booster Pack: Viper Tail 5-80O", parts: ["Viper Tail", "5-80", "Orb"] },
            { name: "Booster Pack: Dranzer Spiral 3-80T", parts: ["Dranzer Spiral", "3-80", "Taper"] },
            { name: "Booster Pack: Steel Samurai 4-80N", parts: ["Steel Samurai", "4-80", "Needle"] },
            { name: "Booster Pack: Talon Drake 4-60F", parts: ["Talon Drake", "4-60", "Flat"] },
            { name: "UX Starter: Dran Buster 1-60A", parts: ["Dran Buster", "1-60", "Accel"] },
            { name: "UX Starter: Wizard Rod 5-70DB", parts: ["Wizard Rod", "5-60", "Disc Ball"] },
            { name: "UX Starter: Hells Hammer 3-70H", parts: ["Hells Hammer", "3-60", "Hexa"] },
            { name: "Dual Pack: Dranzer Spiral & Talon Drake", parts: ["Dranzer Spiral", "3-80", "Taper", "Talon Drake", "4-60", "Flat"] },
            { name: "Crossover: Optimus Prime 3-60F", parts: ["Optimus Prime", "3-60", "Flat"] },
            { name: "Crossover: Megatron 4-80N", parts: ["Megatron", "4-80", "Needle"] },
            { name: "Crossover: Iron Man 4-80B", parts: ["Iron Man", "4-80", "Ball"] },
            { name: "Crossover: Thanos 4-60LF", parts: ["Thanos", "4-60", "Low Flat"] }
        ];

        // --- LOGICA APP ---
        const state = {
            inventory: { blades: {}, ratchets: {}, bits: {} },
            currentBuild: null,
            deck: [null, null, null],
            chart: null
        };

        function init() {
            initChart();
            populateSelector();
            load();
            renderInv();
            updateDropdowns();
            renderDeck();
        }

        function populateSelector() {
            const s = document.getElementById('hasbroProductSelector');
            PRODUCTS.forEach((p, i) => {
                const o = document.createElement('option');
                o.value = i;
                o.textContent = p.name;
                s.appendChild(o);
            });
        }

        document.getElementById('addBtn').addEventListener('click', () => {
            const idx = document.getElementById('hasbroProductSelector').value;
            if (idx === "") return;
            const p = PRODUCTS[idx];
            
            const add = (cat, name) => state.inventory[cat][name] = (state.inventory[cat][name] || 0) + 1;
            
            for(let i=0; i<p.parts.length; i+=3) {
                add('blades', p.parts[i]);
                add('ratchets', p.parts[i+1]);
                add('bits', p.parts[i+2]);
            }
            save(); renderInv(); updateDropdowns();
        });

        function removeItem(cat, name) {
            if(state.inventory[cat][name] > 0) {
                state.inventory[cat][name]--;
                if(state.inventory[cat][name] === 0) delete state.inventory[cat][name];
            }
            save(); renderInv(); updateDropdowns();
        }

        function renderInv() {
            const draw = (cat, elId) => {
                const c = document.getElementById(elId);
                c.innerHTML = '';
                const items = Object.entries(state.inventory[cat]);
                if(!items.length) {
                    c.innerHTML = `<div class="py-10 text-center border-2 border-dashed border-slate-100 rounded-2xl text-slate-300 text-xs italic">Nessun componente</div>`;
                    return;
                }
                items.forEach(([n, count]) => {
                    const d = document.createElement('div');
                    d.className = "inventory-card relative bg-white border border-slate-200 p-3 rounded-xl flex justify-between items-center shadow-sm";
                    d.innerHTML = `
                        <div class="flex flex-col">
                            <span class="text-[8px] font-black uppercase text-blue-500">${PARTS_DB[cat][n]?.type || 'Part'}</span>
                            <span class="text-xs font-bold text-slate-800">${n}</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-[10px] font-bold bg-slate-100 text-slate-400 px-2 py-1 rounded-md">x${count}</span>
                            <button onclick="removeItem('${cat}', '${n}')" class="delete-btn text-slate-300 hover:text-red-500 transition">üóëÔ∏è</button>
                        </div>
                    `;
                    c.appendChild(d);
                });
            };
            draw('blades', 'inv-blades'); draw('ratchets', 'inv-ratchets'); draw('bits', 'inv-bits');
        }

        function updateDropdowns() {
            const sync = (id, cat) => {
                const s = document.getElementById(id);
                const prev = s.value;
                s.innerHTML = `<option value="">Scegli...</option>`;
                Object.keys(state.inventory[cat]).forEach(n => {
                    const o = document.createElement('option'); o.value = n; o.textContent = n; s.appendChild(o);
                });
                if(state.inventory[cat][prev]) s.value = prev;
            };
            sync('select-blade', 'blades'); sync('select-ratchet', 'ratchets'); sync('select-bit', 'bits');
        }

        // --- ANALISI ---
        function initChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            state.chart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ATTACCO', 'DIFESA', 'STAMINA', 'PESO', 'DASH'],
                    datasets: [{
                        data: [0,0,0,0,0],
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2, pointRadius: 0
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { display: false }, grid: { color: '#f1f5f9' }, angleLines: { color: '#f1f5f9' }, pointLabels: { font: { size: 9, weight: '800' }, color: '#94a3b8' } } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        document.getElementById('analyzeBtn').addEventListener('click', () => {
            const b = document.getElementById('select-blade').value;
            const r = document.getElementById('select-ratchet').value;
            const bit = document.getElementById('select-bit').value;
            if(!b || !r || !bit) return alert("Scegli i componenti!");

            const bD = PARTS_DB.blades[b], rD = PARTS_DB.ratchets[r], bitD = PARTS_DB.bits[bit];
            const wT = bD.weight + rD.weight + 2.0;
            const atk = (bD.stats.atk * 0.7) + (bitD.spd * 0.3);
            const def = (bD.stats.def * 0.7) + (rD.weight * 2);
            const sta = (bD.stats.sta * 0.7) + (bitD.sta * 0.3);
            const wei = (wT / 48) * 100;
            const dsh = (bitD.dsh * 0.8) + (atk * 0.2);

            const stats = [atk, def, sta, wei, dsh];
            state.chart.data.datasets[0].data = stats;
            state.chart.update();
            document.getElementById('chart-msg').style.opacity = 0;

            document.getElementById('val-weight').textContent = wT.toFixed(1) + " g";
            document.getElementById('val-burst').textContent = Math.round((bD.stats.res * 0.4) + (rD.res * 0.6));

            const avg = stats.reduce((a,c) => a+c, 0)/5;
            let g = 'C'; if(avg > 78) g = 'S'; else if(avg > 65) g = 'A'; else if(avg > 50) g = 'B';
            const badge = document.getElementById('grade-badge');
            badge.className = `w-16 h-16 rounded-2xl flex flex-col items-center justify-center border-2 transition-all grade-${g.toLowerCase()}`;
            badge.querySelector('span:last-child').textContent = g;

            let fb = `Build <strong>${bD.type}</strong> basata su <strong>${b}</strong>. `;
            if(bD.type === bitD.type) fb += `Sinergia perfetta! Il Bit esalta il ruolo della Blade. `;
            else fb += `Configurazione ibrida creativa. `;
            if(wT > 44) fb += `<br><br><span class="text-green-600 font-bold uppercase text-[9px]">Vantaggio Peso:</span> Molto difficile da spostare.`;
            document.getElementById('feedback-text').innerHTML = fb;
            document.getElementById('saveDeckBtn').disabled = false;
            state.currentBuild = { b, r, bit, g };
        });

        // --- DECK ---
        document.getElementById('saveDeckBtn').addEventListener('click', () => {
            const slot = state.deck.findIndex(s => s === null);
            if(slot === -1) return alert("Deck pieno!");
            state.deck[slot] = { ...state.currentBuild };
            renderDeck();
        });

        function renderDeck() {
            const g = document.getElementById('deck-grid'); g.innerHTML = '';
            state.deck.forEach((b, i) => {
                const d = document.createElement('div');
                d.className = `h-48 rounded-3xl border-2 p-6 flex flex-col justify-center items-center text-center ` + 
                    (b ? "bg-white border-slate-200 shadow-md" : "border-dashed border-slate-200 bg-slate-50");
                if(b) {
                    d.innerHTML = `
                        <div class="w-full text-left">
                            <span class="text-[9px] font-black text-blue-500 uppercase">Slot #${i+1}</span>
                            <h5 class="text-sm font-black text-slate-800 mt-1">${b.b}</h5>
                            <p class="text-[10px] text-slate-400 font-bold">${b.r} / ${b.bit}</p>
                            <button onclick="removeDeck(${i})" class="mt-6 w-full py-2 bg-red-50 text-red-500 text-[9px] font-black uppercase rounded-lg">Rimuovi</button>
                        </div>
                    `;
                } else {
                    d.innerHTML = `<span class="text-xs font-bold text-slate-300 uppercase tracking-widest">Slot Libero</span>`;
                }
                g.appendChild(d);
            });
        }

        function removeDeck(i) { state.deck[i] = null; renderDeck(); }

        function save() { localStorage.setItem('beylab_hasbro', JSON.stringify(state.inventory)); }
        function load() { const s = localStorage.getItem('beylab_hasbro'); if(s) state.inventory = JSON.parse(s); }

        window.onload = init;
    </script>
</body>
</html>
